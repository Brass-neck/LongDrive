# 优化分类

1. 优化开发效率

   优化开发体验的目的是为了提升开发时的效率，其中又可以分为以下几点：

   - 优化构建速度

     在项目庞大时构建耗时可能会变的很长，每次等待构建的耗时加起来也会是个大数目

   - 优化使用体验

     通过自动化手段完成一些重复的工作，让我们专注于解决问题本身

2. 优化输出质量

   优化输出质量的目的是为了**给用户呈现体验更好的网页**，例如**减少首屏加载时间、提升性能流畅度**等

   这至关重要，因为在互联网行业竞争日益激烈的今天，这可能关系到你的产品的生死

   优化输出质量，本质是优化构建输出的要发布到线上的代码（通常是 dist 下生成的代码）

# 查找问题

优化的关键是**找出问题所在**，这样才能一针见血，为此你需要对输出结果做分析，以决定下一步的优化方向

1. 输出分析报告

在启动 Webpack 时，支持两个参数，分别是：

- `--profile`：记录下构建过程中的耗时信息
- `--json`：以 JSON 的格式输出构建结果，最后只输出一个 `.json` 文件，这个文件中包括所有构建相关的信息，这个文件是给后面介绍的可视化分析工具使用的

```node
webpack --profile --json > stats.json
```

2. 官方的可视化分析工具

Webpack 官方提供了一个可视化分析工具 Webpack Analyse，它是一个在线 Web 应用，打开 Webpack Analyse 链接的网页后，你就会看到一个弹窗提示你上传 JSON 文件，也就是需要上传上面讲到的 `stats.json` 文件

Webpack Analyse 不会把你的文件发到服务器，而是在浏览器本地解析，你不用担心自己的代码为此而泄露

上传文件后，会得到一个效果图，它分为了六大板块，分别是：

- Modules：展示所有的模块，每个模块对应一个文件。并且还包含所有模块之间的依赖关系图、模块路径、模块 ID、模块所属 Chunk、模块大小；
  Chunks：展示所有的代码块，一个代码块中包含多个模块。并且还包含代码块的 ID、名称、大小、每个代码块包含的模块数量，以及代码块之间的依赖关系图；
- Assets：展示所有输出的文件资源，包括 .js、.css、图片等。并且还包括文件名称、大小、该文件来自哪个代码块；
- Warnings：展示构建过程中出现的所有警告信息；
- Errors：展示构建过程中出现的所有错误信息；
- Hints：展示处理每个模块的过程中的耗时。

我们可以看到整个项目的模块依赖关系、chunk 代码块的结构、以及每个文件的大小和处理时间，从而可以找出是哪个文件导致构建缓慢

3. webpack-bundle-analyzer

webpack-bundle-analyzer 是另一个可视化分析工具， 它虽然没有官方那样有那么多功能，但比官方的要更加直观

它能方便的让你知道：

打包出的文件中都包含了什么；
每个文件的尺寸在总体中的占比，一眼看出哪些文件尺寸大；
模块之间的包含关系；
每个文件的 Gzip 后的大小。

使用方式：

1. npm i -g webpack-bundle-analyzer
2. 按照上面提到的方法生成 stats.json 文件
3. 在项目根目录中执行 webpack-bundle-analyzer 后，浏览器会打开对应网页看到效果
